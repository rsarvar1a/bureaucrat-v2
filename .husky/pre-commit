if git diff --cached --name-only | grep -q 'schema/'; then

  bun run db:generate || true
  echo ""
  
  git add migrations/

  if git diff --cached --name-only | grep -q '^migrations/'; then
    echo ""
    echo "New migrations were generated and staged."
    echo "Please rename the migration subfolder in a fixup commit."
    echo ""
  fi
fi

# oxlint and prettier
bun run lint && bun run format
echo ""